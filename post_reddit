async function postImageToSubreddit(
    context,
    subredditName,
    title,
    imageBinary
) {
    const upload = await context.reddit.uploadMedia({
        subredditName,
        mimeType: 'image/png',
        data: imageBinary,
    });

    if (!upload || !upload.mediaId) {
        throw new Error('Reddit image upload failed');
    }

    const post = await context.reddit.submitPost({
        subredditName,
        title,
        mediaId: upload.mediaId,
    });

    console.log(`âœ“ Posted to r/${subredditName}: https://reddit.com${post.permalink}`);
    return post;
}
